<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://4l0n3r.github.io/ name=base><title>
            
                Blend - Formal Verification
            
        </title><meta content="Blend - Formal Verification" property=og:title><meta content="Aka S0m30n3" property=og:description><meta content="Aka S0m30n3" name=description><link href=/favicons/favicon.ico rel=icon type=image/png><link href=https://4l0n3r.github.io/fonts.css rel=stylesheet><script src=https://4l0n3r.github.io/js/codeblock.js></script><script src=https://4l0n3r.github.io/js/toc.js></script><script src=https://4l0n3r.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://4l0n3r.github.io/atom.xml rel=alternate title=Johny type=application/atom+xml><link href=https://4l0n3r.github.io/theme/light.css rel=stylesheet><link href=https://4l0n3r.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://4l0n3r.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://4l0n3r.github.io/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://4l0n3r.github.io/>Johny</a><div class=socials><a class=social href=https://x.com/0xJ0hny rel=me> <img alt=twitter src=https://4l0n3r.github.io/icons/social/twitter.svg> </a><a class=social href=https://github.com/4l0n3r/ rel=me> <img alt=github src=https://4l0n3r.github.io/icons/social/github.svg> </a><a class=social href=https://www.linkedin.com/in/johny-vasamsettti/ rel=me> <img alt=linkedin src=https://4l0n3r.github.io/icons/social/linkedin.svg> </a><a href="mailto: vasamsetti.johny@gmail.com" class=social rel=me> <img alt=Email src=https://4l0n3r.github.io/icons/social/email.svg> </a></div></div><nav><a href=https://4l0n3r.github.io/posts style=margin-left:.25em>/posts</a><a href=https://4l0n3r.github.io/writeups style=margin-left:.25em>/writeups</a><a href=https://4l0n3r.github.io/projects style=margin-left:.25em>/projects</a><a href=https://4l0n3r.github.io/tags style=margin-left:.25em>/tags</a><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://4l0n3r.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://4l0n3r.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><main><article><div class=title><div class=page-header>Blend - Formal Verification<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2025-02-24</time> :: 305 Words</div></div><div class=toc-container><h1 class=toc-title>Table of Contents</h1><ul class=toc-list><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#test-tube-formal-verification-participation-blend-protocol-cantina-contest>ğŸ§ª Formal Verification Participation - Blend Protocol (Cantina Contest)</a> <ul><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#blue-book-about-blend-protocol>ğŸ“˜ About Blend Protocol</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#floppy-disk-contest-overview>ğŸ’¾ Contest Overview</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#mag-scope-of-verification>ğŸ” Scope of Verification</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#file-folder-project-layout-for-sorabanprover>ğŸ“ Project Layout for SorabanProver</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#test-tube-running-verification>ğŸ§ª Running Verification</a></li><ul><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#1-compile-the-code>1. Compile the Code</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#2-run-the-prover>2. Run the Prover</a></ul><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#white-check-mark-key-highlights>âœ… Key Highlights</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#brain-learnings>ğŸ§  Learnings</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#adult-computer-author>ğŸ§‘â€ğŸ’» Author</a><li><a href=https://4l0n3r.github.io/writeups/blend-v2-formal-verification/#pushpin-note>ğŸ“Œ Note</a></ul></ul></div><section class=body><h1 id=test-tube-formal-verification-participation-blend-protocol-cantina-contest><a aria-label="Anchor link for: test-tube-formal-verification-participation-blend-protocol-cantina-contest" class=zola-anchor href=#test-tube-formal-verification-participation-blend-protocol-cantina-contest>ğŸ§ª Formal Verification Participation - Blend Protocol (Cantina Contest)</a></h1><p>This repository documents my participation in the <strong>Blend Protocol Formal Verification Contest</strong> hosted by <a href=https://cantina.xyz/>Cantina</a> in <strong>February 2025</strong>. The project focuses on analyzing and verifying key Rust smart contracts of the Blend Protocol using <strong>SorabanProver</strong>, a static verification tool for Soroban (Stellarâ€™s smart contract platform).<hr><h2 id=blue-book-about-blend-protocol><a aria-label="Anchor link for: blue-book-about-blend-protocol" class=zola-anchor href=#blue-book-about-blend-protocol>ğŸ“˜ About Blend Protocol</a></h2><p><strong>Blend</strong> is a universal liquidity primitive that enables the permissionless creation of lending pools. Itâ€™s written in <strong>Rust</strong> and deployed on the <strong>Soroban</strong> smart contract platform.<ul><li>ğŸ› ï¸ Language: Rust<li>ğŸ§  Target: Formal Verification with <a href=https://github.com/stellar/soroban-prover>SorabanProver</a></ul><hr><h2 id=floppy-disk-contest-overview><a aria-label="Anchor link for: floppy-disk-contest-overview" class=zola-anchor href=#floppy-disk-contest-overview>ğŸ’¾ Contest Overview</a></h2><ul><li><strong>Github Project</strong>: <a href=https://github.com/4l0n3r/2025-02-blend-fv>Blend Protocol</a><li><strong>Contest Host</strong>: C4<li><strong>Date</strong>: Feb 2025<li><strong>Focus</strong>: Rust-based smart contracts<li><strong>Category</strong>: Formal Verification using SMT-solvers and rule-based specifications</ul><hr><h2 id=mag-scope-of-verification><a aria-label="Anchor link for: mag-scope-of-verification" class=zola-anchor href=#mag-scope-of-verification>ğŸ” Scope of Verification</a></h2><p>The verification focused on the following Rust source files:<table><thead><tr><th>Contract File<th>Description<tbody><tr><td><code>withdrawal.rs</code><td>Handles user withdrawals<tr><td><code>user.rs</code><td>User identity and actions<tr><td><code>deposit.rs</code><td>Token deposits logic<tr><td><code>fund_management.rs</code><td>Fund pool and accounting<tr><td><code>pool.rs</code><td>Lending pool core logic</table><hr><h2 id=file-folder-project-layout-for-sorabanprover><a aria-label="Anchor link for: file-folder-project-layout-for-sorabanprover" class=zola-anchor href=#file-folder-project-layout-for-sorabanprover>ğŸ“ Project Layout for SorabanProver</a></h2><pre style=color:#61676c;background-color:#fafafa><code><span>backstop/
</span><span>â”œâ”€â”€ confs/                           # Configuration files per contract
</span><span>â”‚   â””â”€â”€ *.conf
</span><span>â”œâ”€â”€ src/
</span><span>â”‚   â””â”€â”€ certora_specs/              # Verification specifications
</span><span>â”‚       â”œâ”€â”€ *.spec
</span><span>â”‚       â”œâ”€â”€ summaries/              # Function summaries
</span><span>â”‚       â””â”€â”€ mocks/                  # Mock implementations
</span><span>â”œâ”€â”€ mutations/                      # Mutation tests for evaluation
</span><span>â””â”€â”€ certora_build.py                # Build helper script
</span></code></pre><hr><h2 id=test-tube-running-verification><a aria-label="Anchor link for: test-tube-running-verification" class=zola-anchor href=#test-tube-running-verification>ğŸ§ª Running Verification</a></h2><h3 id=1-compile-the-code><a aria-label="Anchor link for: 1-compile-the-code" class=zola-anchor href=#1-compile-the-code>1. Compile the Code</a></h3><p>All edits and spec additions should occur under the <code>backstop/</code> directory.<pre class=language-bash data-lang=bash style=color:#61676c;background-color:#fafafa><code class=language-bash data-lang=bash><span>
</span><span style=color:#f07171>cd</span><span> backstop
</span><span style=color:#f29718>just</span><span> build
</span></code></pre><h3 id=2-run-the-prover><a aria-label="Anchor link for: 2-run-the-prover" class=zola-anchor href=#2-run-the-prover>2. Run the Prover</a></h3><p>Run the SorabanProver for a specific contract configuration:<pre class=language-bash data-lang=bash style=color:#61676c;background-color:#fafafa><code class=language-bash data-lang=bash><span>  </span><span style=color:#f07171>cd</span><span> confs
</span><span>  </span><span style=color:#f29718>certoraSorobanProver</span><span> withdrawal.conf   </span><span style=color:#abb0b6;font-style:italic># example
</span></code></pre><blockquote><p>ğŸ”’ You may need to first run:<pre class=language-bash data-lang=bash style=color:#61676c;background-color:#fafafa><code class=language-bash data-lang=bash><span style=color:#f29718>chmod</span><span> +x certora_build.py
</span></code></pre></blockquote><hr><h2 id=white-check-mark-key-highlights><a aria-label="Anchor link for: white-check-mark-key-highlights" class=zola-anchor href=#white-check-mark-key-highlights>âœ… Key Highlights</a></h2><ul><li><p>Defined and tested:</p> <ul><li><strong>Function-level specifications</strong><li><strong>State invariants</strong></ul><li><p>Verified business logic and safety properties around:</p> <ul><li>Pool reserve tracking<li>User deposit and withdrawal correctness<li>Consistency in fund management</ul></ul><hr><h2 id=brain-learnings><a aria-label="Anchor link for: brain-learnings" class=zola-anchor href=#brain-learnings>ğŸ§  Learnings</a></h2><ul><li>Gained hands-on experience with <strong>SorabanProver</strong><li>Practiced writing custom <strong>mock functions and summaries</strong><li>Understood the <strong>verification lifecycle</strong> for Rust-based smart contracts<li>Tackled challenges with symbolic state, mutation testing, and specification refinement</ul><hr><h2 id=adult-computer-author><a aria-label="Anchor link for: adult-computer-author" class=zola-anchor href=#adult-computer-author>ğŸ§‘â€ğŸ’» Author</a></h2><p><strong>Johny Vasamsetti</strong> Smart Contract Security Enthusiast | Formal Verification | Rust | Web3 Infra<ul><li><a href=https://github.com/4l0n3r>GitHub</a></ul><hr><h2 id=pushpin-note><a aria-label="Anchor link for: pushpin-note" class=zola-anchor href=#pushpin-note>ğŸ“Œ Note</a></h2><p>This repository is a submission for educational and learning purposes. It does not contain any security disclosures or sensitive vulnerabilities.</section></article></main></div>